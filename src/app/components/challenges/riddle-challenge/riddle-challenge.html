<div class="riddle-container">
  <!-- Title -->
  <div class="flex items-center justify-center gap-3 mb-6">
    <h3 class="text-xl sm:text-2xl font-bold text-gold text-center">
      ğŸ§ {{ 'challenges.riddle.title' | translate }} ğŸ§
    </h3>
    <span
      *ngIf="isCompleted"
      class="bg-accent-green text-white text-xs px-2 py-1 rounded-full font-bold animate-in fade-in zoom-in flex items-center gap-1"
    >
      <lucide-icon [img]="Check" class="w-3 h-3" [strokeWidth]="4"></lucide-icon>
      {{ 'calendar.completed' | translate }}
    </span>
  </div>

  <!-- Riddle Text -->
  <div class="bg-bg rounded-lg p-6 mb-6">
    <p class="text-lg sm:text-xl text-text leading-relaxed text-center italic">
      {{ config.riddleKey | translate }}
    </p>
  </div>

  <!-- Hint Button (if available) -->
  @if (config.hintKey) {
  <div class="mb-4 text-center">
    <button class="btn btn-outline text-sm" (click)="toggleHint()">
      {{ (showHint ? 'challenges.riddle.hideHint' : 'challenges.riddle.showHint') | translate }}
    </button>
  </div>
  @if (showHint) {
  <div class="bg-accent-green bg-opacity-10 border border-accent-green rounded-lg p-4 mb-6">
    <p class="text-sm sm:text-base text-text text-center">ğŸ’¡ {{ config.hintKey | translate }}</p>
  </div>
  }}

  <!-- Answer Input -->
  <div class="mb-6 max-w-96 mx-auto">
    <label for="riddle-answer" class="block text-sm font-medium text-text-muted mb-2">
      {{ 'challenges.riddle.instruction' | translate }}
    </label>
    <input
      id="riddle-answer"
      type="text"
      class="input"
      [(ngModel)]="userAnswer"
      (keypress)="onKeyPress($event)"
      [placeholder]="'challenges.riddle.placeholder' | translate"
      [disabled]="false"
    />
  </div>

  <!-- Error Message -->
  @if (showError) {
  <div class="mb-4 p-3 bg-accent-red bg-opacity-20 border border-accent-red rounded-lg">
    <p class="text-text text-center text-sm sm:text-base">
      âŒ {{ 'challenges.riddle.incorrect' | translate }}
    </p>
  </div>
  }

  <!-- Submit Button -->
  <div class="text-center flex flex-col sm:flex-row gap-3 justify-center">
    @if (!isCompleted) {
    <button
      class="btn btn-primary w-full sm:w-auto px-8"
      (click)="onSubmit()"
      [disabled]="!userAnswer.trim()"
    >
      {{ 'challenges.riddle.submit' | translate }}
    </button>
    } @else {
    <button class="btn btn-primary w-full sm:w-auto px-8" (click)="showReward()">
      {{ 'ui.showReward' | translate }}
    </button>
    <button class="btn btn-outline w-full sm:w-auto px-8" (click)="reset()">
      {{ 'ui.playAgain' | translate }}
    </button>
    }
  </div>
</div>
