<!-- Modal Overlay -->
<div class="modal-overlay" (click)="onClose()">
  <!-- Modal Content -->
  <div
    class="modal-content w-full h-full lg:rounded-2xl flex flex-col overflow-hidden lg:w-[1500px] lg:max-w-[1400px] lg:h-[90vh]"
    (click)="$event.stopPropagation()"
  >
    <!-- Header with Close Button -->
    <div
      class="flex items-center justify-between mb-1 md:mb-4 lg:mb-6 flex-shrink-0 sticky top-0 bg-surface z-10 py-1 lg:py-0 lg:static"
    >
      <h2 class="text-sm sm:text-lg md:text-3xl font-bold text-text">
        @if (dayConfig.day > 0) { ğŸ„
        {{ 'calendar.dayLabel' | translate : { day: dayConfig.day } }} ğŸ } @else { ğŸ
        {{ 'extras.challengeTitle' | translate }} ğŸ }
      </h2>
      <button
        (click)="onClose()"
        class="btn btn-outline p-1 md:p-2 min-w-0 text-xs md:text-base"
        aria-label="Close"
      >
        <lucide-icon [img]="X" class="size-3 sm:size-4 md:size-6" [strokeWidth]="2"></lucide-icon>
      </button>
    </div>

    <!-- Challenge Content Area -->
    @if (!showFunFact) {
    <div class="challenge-content flex-1 overflow-y-auto pb-4 sm:pb-0">
      <!-- Dynamic challenge component container -->
      <ng-container #challengeContainer></ng-container>

      <!-- Placeholder for unimplemented challenge types -->
      @if (!challengeContainer) {
      <div class="text-center py-12">
        <p class="text-lg text-text-muted mb-4">
          Challenge type: <span class="text-gold font-semibold">{{ dayConfig.challengeType }}</span>
        </p>
        <p class="text-sm text-text-muted">This challenge type is not yet implemented.</p>
      </div>
      }
    </div>
    } @else {
    <!-- Fun Fact Display -->
    <app-fun-fact-reveal
      [funFactKey]="dayConfig.funFactKey"
      [reward]="dayConfig.reward"
      (continue)="onCloseFunFact()"
    ></app-fun-fact-reveal>
    }
  </div>
</div>
