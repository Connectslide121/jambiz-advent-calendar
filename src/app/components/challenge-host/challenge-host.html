<!-- Modal Overlay -->
<div class="modal-overlay" (click)="onClose()">
  <!-- Modal Content -->
  <div
    class="modal-content w-full h-full sm:w-[1500px] sm:h-auto sm:rounded-2xl flex flex-col"
    (click)="$event.stopPropagation()"
  >
    <!-- Header with Close Button -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl sm:text-3xl font-bold text-text">Day {{ dayConfig.day }}</h2>
      <button (click)="onClose()" class="btn btn-outline p-2 min-w-0" aria-label="Close">
        <lucide-icon [img]="X" class="w-6 h-6" [strokeWidth]="2"></lucide-icon>
      </button>
    </div>

    <!-- Challenge Content Area -->
    @if (!showFunFact) {
    <div
      class="challenge-content min-h-[300px] flex flex-col justify-center flex-1 sm:flex-none sm:min-h-[300px]"
    >
      <!-- Dynamic challenge component container -->
      <ng-container #challengeContainer></ng-container>

      <!-- Placeholder for unimplemented challenge types -->
      @if (!challengeContainer) {
      <div class="text-center py-12">
        <p class="text-lg text-text-muted mb-4">
          Challenge type: <span class="text-gold font-semibold">{{ dayConfig.challengeType }}</span>
        </p>
        <p class="text-sm text-text-muted">This challenge type is not yet implemented.</p>
      </div>
      }
    </div>
    } @else {
    <!-- Fun Fact Display -->
    <app-fun-fact-reveal
      [funFactKey]="dayConfig.funFactKey"
      (continue)="onCloseFunFact()"
    ></app-fun-fact-reveal>
    }
  </div>
</div>
